<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mahi's Zone Certificate Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Cormorant+Garamond&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<style>
:root{
  --bg-gradient: linear-gradient(135deg,#ff9a9e,#fad0c4);
  --ribbon-gradient: linear-gradient(90deg,#ffd700,#ff9900);
  --badge-glow: radial-gradient(circle,#ffd700,#ff9900,#ff0099);
}
body{margin:0;font-family:'Playfair Display', serif;background:#111;color:#fff;}
h1,h2,h3{margin:0;padding:0;text-align:center;}
#certificate-dashboard{max-width:1400px;margin:auto;padding:30px;}

/* Certificate Box */
.certificate-box{max-width:950px;margin:auto;padding:50px 30px;background:var(--bg-gradient);backdrop-filter: blur(18px);border-radius:30px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.5);border:5px solid #ffd700;position:relative;overflow:hidden;}
.ribbon{position:absolute;top:-10px;left:50%;transform: translateX(-50%) rotate(-5deg);background: var(--ribbon-gradient);padding:12px 50px;font-weight:bold;color:#000;font-size:1.5rem;border-radius:5px;box-shadow:0 5px 15px rgba(0,0,0,0.3);animation: ribbonMove 2s ease infinite alternate;}
@keyframes ribbonMove{0%{transform:translateX(-50%) rotate(-5deg);}100%{transform:translateX(-50%) rotate(5deg);}}
.badge{position:absolute;top:10px;right:10px;background: var(--badge-glow);padding:10px 25px;border-radius:50px;color:#000;font-weight:bold;display:flex;flex-direction:column;align-items:center;box-shadow:0 5px 20px rgba(0,0,0,0.4);}
.xp-bar{margin-top:5px;width:80px;height:8px;background: rgba(255,255,255,0.2);border-radius:5px;overflow:hidden;}
#xpProgress{width:10%;height:100%;background: linear-gradient(90deg,#ffd700,#ff9900);border-radius:5px;transition: width 0.5s ease, background 0.5s ease;}

.certificate-content h2{font-size:2rem;color:#fff;margin:15px 0;}
.certificate-content h3{font-size:1.5rem;color:#ffd700;margin:10px 0;}
.signature{margin-top:30px;font-style:italic;color:#fff;}
.qr-code img{margin-top:20px;border-radius:10px;}

.certificate-inputs{margin-top:30px;text-align:center;}
.certificate-inputs input{padding:10px 15px;border-radius:8px;border:none;margin:5px;width:180px;}
.certificate-inputs button{padding:10px 25px;margin:5px;border:none;border-radius:10px;font-weight:bold;cursor:pointer;}
.certificate-inputs button:nth-child(3){background:#ffd700;color:#000;}
.certificate-inputs button:nth-child(4){background:#00ff9c;color:#000;}

/* Dynamic Sections */
.dynamic-sections{display:flex;flex-wrap:wrap;gap:20px;margin-top:50px;}
.dynamic-sections > div{flex:1 1 calc(33% - 20px);min-width:250px;}
.cert-card,.leader-card,.badge-card{background: linear-gradient(135deg,#ff9a9e,#fad0c4);padding:20px;border-radius:25px;text-align:center;box-shadow:0 15px 50px rgba(0,0,0,0.5);transition: transform 0.4s ease, box-shadow 0.4s ease;cursor:pointer;perspective:1000px;}
.cert-card:hover,.leader-card:hover,.badge-card:hover{transform: translateY(-12px) rotateX(5deg) rotateY(5deg);box-shadow:0 35px 70px rgba(0,0,0,0.6);}
.badge-card{background: var(--badge-glow); color:#000; font-weight:bold; font-size:1.2rem; animation: badgeGlow 2s infinite alternate; box-shadow:0 0 15px #ffd700,0 0 30px #ff9900,0 0 50px #ff0099;}
@keyframes badgeGlow{0%{transform:scale(1);box-shadow:0 0 10px #ffd700,0 0 20px #ff9900,0 0 40px #ff0099;}50%{transform:scale(1.05);box-shadow:0 0 20px #ffd700,0 0 40px #ff9900,0 0 60px #ff0099;}100%{transform:scale(1);box-shadow:0 0 15px #ffd700,0 0 30px #ff9900,0 0 50px #ff0099;}}

/* Stats */
.stats{display:flex;justify-content:space-around;margin-top:50px;flex-wrap:wrap;}
.stat-card{background:#222;padding:20px;border-radius:20px;text-align:center;flex:1 1 200px;margin:10px;box-shadow:0 10px 30px rgba(0,0,0,0.5);transition: transform 0.3s ease;}
.stat-card:hover{transform:translateY(-8px);}
.stat-card h3{color:#ffd700;font-size:1.5rem;}
.stat-card p{font-size:1.2rem;color:#fff;}
</style>
<body>
<section id="certificate-dashboard">
  <div class="certificate-box">
    <div class="ribbon">Certificate of Completion</div>
    <div class="badge"><span id="xpLevel">Level 1</span><div class="xp-bar"><div id="xpProgress"></div></div></div>
    <div class="certificate-content">
      <p>This is to certify that</p>
      <h2 id="userName">[Your Name]</h2>
      <p>has successfully completed</p>
      <h3 id="courseName">[Course Name]</h3>
      <p>on <span id="date">[Date]</span></p>
      <div class="signature"><p>Mahi's Zone</p><small>Founder & Mentor</small></div>
      <div class="qr-code"><img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https://imranmahi.github.io" alt="QR Code"><p style="font-size:12px;">Scan to Verify</p></div>
    </div>
    <div class="certificate-inputs">
      <input type="text" id="nameInput" placeholder="তোমার নাম লিখো">
      <input type="text" id="courseInput" placeholder="কোর্সের নাম লিখো">
      <button onclick="generateCertificate()">Generate Certificate</button>
      <button onclick="downloadPDF()">Download PDF</button>
    </div>
  </div>

  <!-- Dynamic Sections -->
  <div class="dynamic-sections">
    <div class="recent-certificates"><h2>Recent Graduates</h2><div id="recentList"></div></div>
    <div class="leaderboard"><h2>Top XP Users</h2><div id="leaderList"></div></div>
    <div class="badge-collection"><h2>Earned Badges</h2><div id="badgeList"></div></div>
  </div>

  <!-- Stats -->
  <div class="stats">
    <div class="stat-card"><h3 id="totalUsers">0</h3><p>Total Users</p></div>
    <div class="stat-card"><h3 id="totalCertificates">0</h3><p>Total Certificates</p></div>
    <div class="stat-card"><h3 id="topLevel">0</h3><p>Top Level</p></div>
  </div>
</section>

<script>
let users=[]; let badges=[{level:1,name:"🌟 Beginner"},{level:3,name:"🎨 Designer"},{level:5,name:"💻 Coder"},{level:7,name:"🚀 Fast Learner"},{level:10,name:"🏆 Mahi's Zone Master"}];

function generateCertificate(){
  let name=document.getElementById("nameInput").value||"[Your Name]";
  let course=document.getElementById("courseInput").value||"[Course Name]";
  let date=new Date().toLocaleDateString();

  document.getElementById("userName").textContent=name;
  document.getElementById("courseName").textContent=course;
  document.getElementById("date").textContent=date;

  let prevLevel=users.find(u=>u.name===name)?.level||0;
  let level=prevLevel+1;
  document.getElementById("xpLevel").textContent="Level "+level;
  let xpColor=level>=10?'#ffd700': level>=7?'#ff9900': level>=5?'#ff6600':'#ff0';
  document.getElementById("xpProgress").style.width=Math.min(level*10,100)+"%";
  document.getElementById("xpProgress").style.background=`linear-gradient(90deg, ${xpColor}, #ff0099)`;

  let existing=users.find(u=>u.name===name);
  if(existing){existing.level=level; existing.course=course; existing.date=date;}
  else{users.push({name,course,date,level});}

  confetti({particleCount:300,spread:150,origin:{y:0.6}});
  updateRecentCertificates(); updateLeaderboard(); updateBadges(name,level); updateStats();
}

function updateRecentCertificates(){
  let recentDiv=document.getElementById("recentList"); recentDiv.innerHTML="";
  users.slice(-5).reverse().forEach(u=>{
    let div=document.createElement("div"); div.className="cert-card";
    div.innerHTML=`<strong>${u.name}</strong> – ${u.course} – Level ${u.level} – ${u.date}`;
    recentDiv.appendChild(div);
  });
}

function updateLeaderboard(){
  let leaderDiv=document.getElementById("leaderList"); leaderDiv.innerHTML="";
  let sorted=[...users].sort((a,b)=>b.level-a.level).slice(0,5);
  sorted.forEach((u,i)=>{
    let div=document.createElement("div"); div.className="leader-card";
    let medal=i===0?'🥇':i===1?'🥈':i===2?'🥉':'';
    div.innerHTML=`${medal} ${u.name} – Level ${u.level}`;
    leaderDiv.appendChild(div);
  });
}

function updateBadges(name,level){
  let badgeDiv=document.getElementById("badgeList"); badgeDiv.innerHTML="";
  let earned=badges.filter(b=>level>=b.level);
  earned.forEach(b=>{
    let div=document.createElement("div"); div.className="badge-card"; div.textContent=b.name;
    badgeDiv.appendChild(div);
  });
}

function updateStats(){
  document.getElementById("totalUsers").textContent=users.length;
  document.getElementById("totalCertificates").textContent=users.reduce((a,b)=>a+1,0);
  let topLevel=Math.max(...users.map(u=>u.level),0);
  document.getElementById("topLevel").textContent=topLevel;
}

async function downloadPDF(){
  const { jsPDF }=window.jspdf;
  let certificate=document.querySelector(".certificate-box");
  let canvas=await html2canvas(certificate,{scale:2});
  let imgData=canvas.toDataURL('image/png');
  let pdf=new jsPDF({orientation:'landscape',unit:'px',format:[canvas.width,canvas.height]});
  pdf.addImage(imgData,'PNG',0,0,canvas.width,canvas.height); pdf.save("mahiszone-certificate.pdf");
}
</script>
</body>
</html>